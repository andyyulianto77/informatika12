
<p>Pada pelajaran lalu kita sudah menampilkan data siswa, membuat koneksi ke database.
  Koneksi ini seperti pintu penghubung antara kode PHP dan database MySQL. Kita bisa
  menulis kode PHP.&#160; Amazing khan...</p>
<a11y-collapse icon="icons:expand-more" icon-expanded="av:fiber-manual-record" label="expand" heading="Tulis Q-1" tooltip="expand" accent-color="grey">
  <p part="heading-id"></p>
  <p></p>
  <p part="heading">Tulis ekstensi PHP yang diperlukan untuk koneksi database!</p>
  <slot name="heading"></slot>
  <p></p>
  <simple-tooltip for="expand" position="bottom" offset="14" margin-top="14">
    <p>
      <slot>expand</slot>
    </p>
  </simple-tooltip>






  <p></p>
  <p aria-labelledby="heading" aria-live="polite" aria-hidden="true"></p>
  <p></p>
</a11y-collapse>
<learning-component subtitle="memunculkan data dengan get id" type="" accent-color="orange">
  <p>Pada akhir pelajaran, siswa dapat ...</p>
  <ol>
    <li>Dapat membuat program PHP sederhana untuk melakukan perhitungan, manipulasi data,
      dan interaksi dengan pengguna dengan menerapkan konsep GET</li>
    <li>Dapat membuat halaman web dinamis.</li>
    <li>Mampu menggunakan alat debugging untuk melacak masalah.</li>
    <li>Dapat mengidentifikasi dan memperbaiki kesalahan sintaks dan logika dalam kod</li>
  </ol>
  <p></p>
</learning-component>
<a11y-collapse icon="icons:expand-more" icon-expanded="av:fiber-manual-record" label="expand" heading="Tulis Q-2" tooltip="expand" accent-color="grey">
  <p part="heading-id"></p>
  <p></p>
  <p part="heading">Tulis tujuan yang paling mudah dan alasannya!</p>
  <slot name="heading"></slot>
  <p></p>
  <simple-tooltip for="expand" position="bottom" offset="14" margin-top="14">
    <p>
      <slot>expand</slot>
    </p>
  </simple-tooltip>






  <p></p>
  <p aria-labelledby="heading" aria-live="polite" aria-hidden="true"></p>
  <p></p>
</a11y-collapse>
<p>Tentu kita tahu, perintah yang telah kita buat sebelumnya.</p>
<ul>
  <li>$stmt-&gt;execute(['nis' =&gt; 202300]);</li>
</ul>
<p>Misalkan kita ingin membiarkan pengguna mengetikkan id di akhir URL.</p>
<ul>
  <li>...?nis=202300</li>
</ul>
<p class="blinkfocus">ID variabel, berikut kodenya</p>
<iframe-loader source="https://pastebin.com/nevMLeCB#mkz1TcNp" height="500" width="100%" loading="">
  
<iframe width="100%" height="500" src="https://pastebin.com/nevMLeCB#mkz1TcNp"></iframe></iframe-loader>
<br/><br/><ul>
  <li>Dapatkan id dari URL (baris 4)</li>
  <li>Buat placeholder untuk id di SQL (baris 6)</li>
  <li>Jalankan kueri dengan placeholder (baris 8)</li>
</ul>
<p>Saya juga mengeluarkan semua bidang, bukan hanya nama. Anda dapat mencobanya&#160;<a href="http://andy1.rf.gd/php/db/php/siswa-id.php?id=202300" target="_blank"><mark>disini</mark></a>. Coba ID yang berbeda.</p>
<br/><br/><a11y-collapse icon="icons:expand-more" icon-expanded="av:fiber-manual-record" label="collapse" heading="Tulis Q-3 (Tulis kode untuk menghubungkan ke database)" tooltip="collapse" accent-color="grey">
  <p part="heading-id"></p>
  <p></p>
  <p part="heading">kode untuk menghubungkan ke database</p>
  <code-sample type="javascript" copy-clipboard-button>
    
  <template preserve-content="preserve-content">// To connect to a DB, need DB name, user name, and password. 
$dbName = 'if0_37345471_dblatihan';
$dbUserName = 'if0_37345471'; 
$dbPassword = 'zahzZt8usKL'; 
// Buat DSN. 
$dsn ="mysql:host=sql109.infinityfree.com;dbname=$dbName"; 
// Connect.
 $dbConnection = new PDO($dsn, $dbUserName, $dbPassword);</template></code-sample>






  <p part="heading"></p>
  <p part="heading"></p>
  <p part="heading"></p>
  <slot name="heading"></slot>
  <p></p>
  <simple-tooltip for="expand" position="bottom" offset="14" margin-top="14">
    <p>
      <slot>expand</slot>
    </p>
  </simple-tooltip>






  <p></p>
  <p aria-labelledby="heading" aria-live="polite" aria-hidden="true"></p>
  <p></p>
  </a11y-collapse>
<h3 data-original-level="H3" id="header-27191c9e-b6de-c05c-7696-570b671d4fb6">Dengan validasi</h3>
<p>Mari kita validasi ID. Coba <a href="http://andy1.rf.gd/php/db/php/siswa-id-validation.php?id=202300" target="_blank"><mark>sini</mark></a>. Ubah id-nya, lalu lihat apa yang terjadi. Berikut
    kodenya. Saya menggunakan fungsi validasi di sini.</p>
<code-sample type="php" copy-clipboard-button>
    
  <template preserve-content="preserve-content"><!--?php
// Untuk terhubung ke DB, perlu nama DB, nama pengguna, dan kata sandi.
$dbName = 'if0_37345471_dblatihan';
$dbUserName = 'if0_37345471';
$dbPassword = 'oke13';
// Buat DSN.
$dsn = "mysql:host=sql109.infinityfree.com;dbname=$dbName";
// Hubungkan.koneksi global
global $dbConnection;
$dbConnection = new PDO($dsn, $dbUserName, $dbPassword);
$errorMessage = '';
// Dapatkan id siswa yang ingin dilihat pengguna.
$id = getParamFromGet('id');
$errorMessage = checkSiswaId($id);

if ($errorMessage == '') {
    try {
        // Siapkan SQL.
        $stmt = $dbConnection----->prepare('SELECT * FROM siswa WHERE nis = :id');
        // Jalankan.
        $stmt-&gt;execute(['id' =&gt; $id]);

        // Ambil data
        $row = $stmt-&gt;fetch(PDO::FETCH_ASSOC);

        if (!$row) {
            $errorMessage = "Maaf, tidak ada siswa yang memiliki id $id.";
        }
    } catch (PDOException $e) {
        $errorMessage = "Terjadi kesalahan: " . $e-&gt;getMessage();
    }
}
?&gt;

//...
//tag pembuka html head body

        <h1>Pertanyaan Siswa</h1>
        <!--?php
        if ($errorMessage != '') {
	print "<p class='error-message'-->$errorMessage<p></p>";
        }
        else {
            print "<p>Id: $id</p>";
            print "<p>Name: {$row['nama']}</p>";
        }
        ?&gt;
//...
//tag penutup html
<!--?php	
 
/**
 * Dapatkan nilai untuk parameter dalam array GET.
 * @param string $paramName Nama parameter.
 * @return string|null Nilai, atau null jika tidak ditemukan.
 */
function getParamFromGet(string $paramName) {
    $returnValue = null;
    if (isset($_GET[$paramName])) {
        $returnValue = $_GET[$paramName];
        if ($returnValue == '') {
            $returnValue = null;
        }
    }
    return $returnValue;
}
 
/**
 * Periksa identitas siswa.
 * @param mixed $id ID siswa yang akan diperiksa.
 * @return string Pesan kesalahan, MT jika tidak ada.
 */
function checkSiswaId($id) {
    global $dbConnection;
    $errorMessage = '';
    if (is_null($id)) {
        $errorMessage ='Maaf, Anda harus memberikan ID siswa.<br-->';
    }
    if ($errorMessage == '') {
        // Check id is numeric.
        if (!is_numeric($id)) {
            $errorMessage = 'Maaf, ID siswa harus berupa angka.<br>';
        }
    }
    if ($errorMessage == '') {
        // Range check.
        if ($id &lt; 202300) {
            $errorMessage = 'Maaf, id siswa harus 202300 atau lebih.<br>';
        }
    }
    if ($errorMessage == '') {
        // Existence check.
        // Prepare SQL.
        $stmt = $dbConnection-&gt;prepare('SELECT * FROM siswa WHERE nis = :id');
        // Run it.
        $stmt-&gt;execute(['id' =&gt; $id]);
        // Anything returned?
        if ($stmt-&gt;rowCount() == 0) {
            $errorMessage = "Maaf, tidak ada siswa yang memiliki id $id.";
        }
    }
    return $errorMessage;
}</template></code-sample>
<p>Koneksi DB sama seperti sebelumnya. Baris 13&#160;</p>
<code-sample type="javascript" copy-clipboard-button>
    <template preserve-content="preserve-content">$id = getParamFromGet('id');</template>
  </code-sample>
<p>&#160;... memanggil fungsi yang kita buat sebelumnya. Fungsi ini mengembalikan nilai
    string, atau null jika nilainya hilang.&#160;</p>
<p>Baris berikutnya memanggil fungsi validasi:&#160;</p>
<code-sample type="javascript" copy-clipboard-button>
    <template preserve-content="preserve-content">$errorMessage = checkSiswaId($id);</template>
    </code-sample>
<p>Seperti biasa, ia akan mengembalikan pesan kesalahan jika ada yang salah. Jika semuanya
      baik-baik saja, ia akan mengembalikan MT.&#160;</p>
<a11y-collapse heading="Tulis Q-4 (Tulis apa maksud fungsi di atas)" heading-button accent-color="grey" icon="icons:expand-more" tooltip="collapse" label="collapse"><p>Content goes here.</p></a11y-collapse>
<p>Mari kita lihat fungsinya. Sebagian besar sama seperti sebelumnya, tetapi ada beberapa
      hal baru di bagian akhir.&#160;</p>
<code-sample type="php" copy-clipboard-button>
      
    <template preserve-content="preserve-content">/**
 * Dapatkan nilai untuk parameter dalam array GET.
 * @param string $paramName Nama parameter.
 * @return string|null Nilai, atau null jika tidak ditemukan.
 */
function getParamFromGet(string $paramName) {
    $returnValue = null;
    if (isset($_GET[$paramName])) {
        $returnValue = $_GET[$paramName];
        if ($returnValue == '') {
            $returnValue = null;
        }
    }
    return $returnValue;
}
 
/**
 * Periksa identitas siswa.
 * @param mixed $id ID siswa yang akan diperiksa.
 * @return string Pesan kesalahan, MT jika tidak ada.
 */
function checkSiswaId($id) {
    global $dbConnection;
    $errorMessage = '';
    if (is_null($id)) {
        $errorMessage ='Maaf, Anda harus memberikan ID siswa.<br>';
    }
    if ($errorMessage == '') {
        // Check id is numeric.
        if (!is_numeric($id)) {
            $errorMessage = 'Maaf, ID siswa harus berupa angka.<br>';
        }
    }
    if ($errorMessage == '') {
        // Range check.
        if ($id &lt; 202300) {
            $errorMessage = 'Maaf, id siswa harus 202300 atau lebih.<br>';
        }
    }
    if ($errorMessage == '') {
        // Existence check.
        // Prepare SQL.
        $stmt = $dbConnection-&gt;prepare('SELECT * FROM siswa WHERE nis = :id');
        // Run it.
        $stmt-&gt;execute(['id' =&gt; $id]);
        // Anything returned?
        if ($stmt-&gt;rowCount() == 0) {
            $errorMessage = "Maaf, tidak ada siswa yang memiliki id $id.";
        }
    }
    return $errorMessage;
}
</template></code-sample>
<p>Mari tambahkan pemeriksaan untuk melihat apakah siswa itu ada. Tampaknya masuk akal
      jika itu menjadi bagian dari fungsi yang memvalidasi id siswa.&#160;</p>
<p>Kode yang relevan
      adalah:&#160;</p>
<code-sample type="javascript" copy-clipboard-button><template preserve-content="preserve-content">// Pemeriksaan keberadaan.
        // Siapkan SQL.
        $stmt = $dbConnection-&gt;prepare('SELECT * FROM siswa WHERE nis = :id');
        // Jalankan.
        $stmt-&gt;execute(['id' =&gt; $id]);
        // Ada yang dikembalikan?
        if ($stmt-&gt;rowCount() == 0) {
            $errorMessage = "Maaf, tidak ada siswa yang memiliki id $id.";
        }</template></code-sample>
<p>Baris 7 memiliki sesuatu yang baru:</p>
<ul><li>$stmt-&gt;rowCount()</li></ul>
<p>Itulah jumlah rekaman dalam <mark>$stmt.</mark> Jika <mark>rowCount()</mark> nol, tidak ada yang dikembalikan, jadi nama&#160;siswa tidak ada.</p>
<a11y-collapse icon="icons:expand-more" icon-expanded="av:fiber-manual-record" label="expand" heading="Tulis Q-5 " tooltip="expand" accent-color="grey">
    <p part="heading-id"></p>

    <p></p>

    <p part="heading">Tulis maksud kode$stmt-&gt;rowCount()</p>

    







    <p part="heading"></p>

    <p part="heading"></p>

    <p part="heading"></p>

    <slot name="heading"></slot>

    <p></p>

    <simple-tooltip for="expand" position="bottom" offset="14" margin-top="14">
    <p>
      <slot>expand</slot>
    </p>
  </simple-tooltip>








    <p></p>

    <p aria-labelledby="heading" aria-live="polite" aria-hidden="true"></p>

    <p></p>

  </a11y-collapse>
<p><span>Koneksi PDO </span></p>
<p><span>Ada hal baru lagi di baris ke-74:</span></p>
<ul><li>global $dbConnection;</li></ul>
<p><code>checkWombatId()</code> memerlukan koneksi DB untuk menjalankan SQL. Kami membuatnya di program utama:</p>
<ul><li>$dbConnection = new PDO($dsn, $dbUserName, $dbPassword); </li></ul>
<p>checkSiswaId() akan memerlukan akses ke $dbConnection. Kita punya dua pilihan. Salah satunya adalah meneruskan $dbConnection ke checkSiswaId(), seperti ini:</p>
<p>$errorMessage = checkSiswaId($id, $dbConnection);&#160;</p>
<p>...&#160;</p>
<p>function checkSiswaId($id, $dbConnection) {&#160;</p>
<p>&#160;.<span>..</span></p>
<p>Itu akan baik-baik saja. Kecuali nanti di kursus ini, kita akan membuat beberapa fungsi yang membutuhkan <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$dbConnection</code>. Kita bisa meneruskannya <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$dbConnection</code>ke semuanya, tetapi akan jadi berantakan.</p>
<p>Sebagai gantinya, kita akan menggunakan <em>variabel global</em> .</p>
<p>Saat Anda mempelajari fungsi, kita berbicara tentang cakupan. Satu-satunya cara data masuk ke fungsi adalah melalui parameter, dan satu-satunya cara keluar adalah melalui nilai yang dikembalikan.</p>
<media-image source="files/walls.png" citation="webapps skilling us" accent-color="grey" size="wide" offset="narrow" data-width="50"></media-image>
<p>Variabel global merupakan pengecualian. Anda dapat membuat variabel yang dapat digunakan bersama oleh semua orang:</p>
<media-image source="files/global.png" citation="webapps skilling us" accent-color="grey" size="wide" offset="narrow" data-width="50"></media-image>
<p>Bila satu fungsi, atau program utama (yang ada di kiri bawah), mengubah global, maka perubahan tersebut berlaku untuk semua orang. Variabel merujuk ke lokasi memori yang sama, di mana pun referensinya berada.&#160;</p>
<p>Untuk membuat variabel global, tambahkan baris:&#8203;</p>
<br/><ul><li>function something($p1, $p2) {</li><li>  global $thing;</li></ul>
<span>...</span><br/><ul><li>function somethingElse($p1, $p2) {</li><li>  global $thing;</li></ul>
<span>...<br><br><br></span><p>Jika Anda tidak mendeklarasikannya sebagai global, variabel tersebut tetap lokal.</p>
<p>Global harus digunakan dengan hati-hati. Kita hanya akan menggunakan satu global di seluruh kursus, untuk menyebarkan <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$dbConnection</code>. Global sangat sering digunakan, sehingga membuatnya menjadi global akan mengurangi kerumitan kode.</p>
<span><br><br></span><span><br>$dbConnection = new PDO($dsn, $dbUserName, $dbPassword);</span><span><br><p>Baris program di atas menjadikannya $dbConnectionglobal, sehingga akan tersedia untuk kode apa pun yang menginginkannya.</p><p>Berikut ini adalah awal fungsinya.</p><p style="font-family: var(--ddd-font-primary); font-size: var(--ddd-theme-body-font-size);">function checkSiswaId($id) { </p><p> global $dbConnection;</p><p style="font-family: var(--ddd-font-primary); font-size: var(--ddd-theme-body-font-size);" role="textbox"><span> $errorMessage = ' ';​</span></p><font face="var(--ddd-font-primary)">...</font><br><br></span>
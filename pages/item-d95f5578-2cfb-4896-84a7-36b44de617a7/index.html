
<p>kalau tanpa database sudah paham</p>
<a11y-collapse icon="icons:expand-more" icon-expanded="av:fiber-manual-record" label="expand" heading="Tulis Q-2" tooltip="expand" accent-color="grey"><p part="heading-id"></p>
  <p></p>
  <p part="heading">Tulis Q-2</p>
  <slot name="heading"></slot>
  <p></p>
  


  <simple-tooltip for="expand" position="bottom" offset="14" margin-top="14"><p><slot>expand</slot></p></simple-tooltip>








  <p></p>
  <p aria-labelledby="heading" aria-live="polite" aria-hidden="true"></p>
  <p></p></a11y-collapse>
<p>Di</p>
<p></p>
<learning-component subtitle="Koneksi ke DATABASE" type="objectives" accent-color="indigo" title="Learning Objectives" icon="courseicons:learning-objectives"><p role="textbox">Pada akhir pembelajaran, Anda dapat ...</p><ol role="textbox"><li>Dapat membuat program PHP sederhana untuk melakukan perhitungan, manipulasi data, dan interaksi dengan pengguna dengan menerapkan koneksi ke database</li><li>Dapat membuat halaman web dinamis.</li><li>Mampu menggunakan alat debugging untuk melacak masalah.</li><li>Dapat mengidentifikasi dan memperbaiki kesalahan sintaks dan logika dalam kode.</li></ol></learning-component>
<a11y-collapse icon="icons:expand-more" icon-expanded="av:fiber-manual-record" label="expand" heading="Tulis Q-2" tooltip="expand" accent-color="grey"><p part="heading-id"></p>
  <p></p>
  <p part="heading">Tulis Q-2</p>
  <slot name="heading"></slot>
  <p></p>
  


  <simple-tooltip for="expand" position="bottom" offset="14" margin-top="14"><p><slot>expand</slot></p></simple-tooltip>








  <p></p>
  <p aria-labelledby="heading" aria-live="polite" aria-hidden="true"></p>
  <p></p></a11y-collapse>
<p><strong>Koneksi ke database</strong> adalah jembatan yang menghubungkan aplikasi web PHP Anda dengan database, seperti MySQL, PostgreSQL, atau SQLite. Melalui koneksi ini, Anda dapat menyimpan, mengambil, memperbarui, dan menghapus data dalam database.</p>
<h3 data-original-level="H3" id="header-820965bc-2347-9d06-eb7c-a3f97e9abb62">Mengapa Kita Perlu Koneksi ke Database?</h3>
<ul><li><strong>Penyimpanan data:</strong> Menyimpan data pengguna, produk, konten, dan informasi lainnya dalam jumlah besar.</li> <li><strong>Pengambilan data:</strong> Mengambil data dari database untuk ditampilkan di halaman web.</li> <li><strong>Pembaruan data:</strong> Memperbarui data yang sudah ada di database.</li> <li><strong>Penghapusan data:</strong> Menghapus data yang tidak diperlukan lagi.</li></ul>
<h3 data-original-level="H3" id="header-13b37089-c6b5-32c5-fb00-9f46512a3a41">Cara Membuat Koneksi ke Database</h3>
<p><strong>1. Persiapan:</strong></p>
<ul><li><strong>Informasi koneksi:</strong> Anda perlu memiliki informasi berikut: <ul> <li>Nama host database</li> <li>Nama database</li> <li>Username database</li> <li>Password database</li> </ul> </li> <li><strong>Ekstensi PHP:</strong> Pastikan ekstensi PHP yang diperlukan untuk koneksi database sudah diaktifkan (misalnya, mysqli atau PDO).</li></ul>
<p><strong>2. Membuat file koneksi:</strong></p>
<ul><li>Buat file PHP terpisah untuk menyimpan informasi koneksi. Ini akan membuat kode Anda lebih terorganisir dan mudah dikelola.</li> <li>Contoh menggunakan mysqli:</li></ul>
<p>Contoh</p>
<code-sample type="php" copy-clipboard-button><template preserve-content="preserve-content">// To connect to a DB, need DB name, user name, and password.
$dbName = 'siswa';
$dbUserName = 'something';
$dbPassword = 'something';
// Create DSN.
$dsn = "mysql:host=localhost;dbname=$dbName";
$dbConnection = new PDO($dsn, $dbUserName, $dbPassword);</template></code-sample>
<p>Mari kita bahas secara terbalik. Untuk membuat koneksi (baris 7), Anda memerlukan tiga hal:</p>
<ul><li>DSN, string dengan nama server dan nama basis data.</li><li>Nama pengguna.</li><li>Sebuah kata sandi.</li></ul>
<p>Dengan info itu, Anda membuat koneksi, dan memasukkannya ke dalam variabel.</p>
<code-sample copy-clipboard-button type="php">  
<template preserve-content="preserve-content">$dbConnection = new PDO($dsn, $dbUserName, $dbPassword);</template></code-sample>
<p>Baris 6 membuat string DSN:</p>
<code-sample copy-clipboard-button type="php">  
  
<template preserve-content="preserve-content">$dsn = "mysql:host=localhost;dbname=$dbName";</template></code-sample>
<p>Ini memberikan nama server dengan DB, dan nama DB.</p>
<p>Nama server selalu <b><i>localhost </i></b>untuk kami, baik di PC Anda maupun di server <b><i>Infinityfree </i></b>Anda.</p>
<p></p>
<meme-maker alt="Cat stalking a small toy" image-url="files/Gambar-02.-PP-WA-Kucing-Gokil-selfie-di-kebun.jpg" top-text="Tunggu, apa?" bottom-text=" localhostdi server InfinityFree?" data-width="50" data-margin="center">
    <div>Tunggu, apa?</div>
      <img src="files/Gambar-02.-PP-WA-Kucing-Gokil-selfie-di-kebun.jpg" alt="Cat stalking a small toy" preload="lazy" aria-describedby=""/>
    <div> localhostdi server InfinityFree?</div></meme-maker>
<p>Ini memang tampak aneh. Masalahnya, MySQL berjalan pada komputer yang sama tempat program PHP Anda berjalan.</p>
<p></p>
<media-image source="files/with-apache.png" card citation="This is my citation." accent-color="grey" size="wide" offset="none"></media-image>
<p>Jadi, sejauh menyangkut PHP, MySQL berjalan pada localhost.&#160;</p>
<p>localhost sebenarnya tidak berarti "PC Anda." Ketika sebuah program merujuk ke localhost, artinya adalah "komputer apa pun yang saya gunakan."&#160;</p>
<p>Jika suatu program PHP berjalan di PC Anda, localhostitu adalah PC Anda, sejauh menyangkut PHP.&#160;</p>
<p>Jika ada program PHP yang berjalan di server Reclaim Anda, localhost itu adalah server InfinityFree Anda, sejauh menyangkut PHP.&#160;</p>
<p>Bila suatu program PHP berjalan di whistlingmonkeys.com server, maka localhost serverlah whistlingmonkeys.com yang menjalankan PHP. Karena kita akan selalu menggunakan localhost, kita dapat memasukkannya ke dalam DSN:</p>
<code-sample type="javascript" copy-clipboard-button><template preserve-content="preserve-content">$dsn = "mysql:host=localhost;dbname=$dbName";</template></code-sample>
<p>Nama DB bervariasi, jadi kita akan menggunakan variabel:</p>
<code-sample type="javascript" copy-clipboard-button><template preserve-content="preserve-content">$dbName = 'siswa';

$dsn = "mysql:host=localhost;dbname=$dbName";</template></code-sample>
<p>Berikut kodenya lagi.</p>
<code-sample type="javascript" copy-clipboard-button><template preserve-content="preserve-content">// Untuk terhubung ke DB, perlu nama DB, nama pengguna, dan kata sandi.
$dbName = 'siswa';
$dbUserName = 'if0_37345471';
$dbPassword = 'zahzZt8usKL ';
// Buat DSN.
$dsn = "mysql:host=localhost;dbname=$dbName";
$dbConnection = new PDO($dsn, $dbUserName, $dbPassword);</template></code-sample>
<p>Setelah selesai, <mark>$dbConnection</mark> akan ada koneksi ke DB, siap menerima SQL.</p>
<p><br></p>
<meme-maker alt="Cat stalking a small toy" image-url="files/ethan-neutral1.png" top-text="Memiliki nama pengguna dan kata sandi dalam kode seperti itu. " bottom-text="Apakah itu masalah keamanan?" data-width="50" data-margin="center">
    <div>Memiliki nama pengguna dan kata sandi dalam kode seperti itu. </div>
      <img src="files/ethan-neutral1.png" alt="Cat stalking a small toy" preload="lazy" aria-describedby=""/>
    <div>Apakah itu masalah keamanan?</div></meme-maker>
<p>Mungkin, tetapi karena file tersebut adalah PHP, dan PHP berjalan di server dan tidak pernah sampai ke klien, maka itu tidak terlalu buruk. Namun, saya mengerti maksud Anda. Kita lihat saja nanti bagaimana cara melindunginya.</p>
<p>Namun, ada masalah penerapan. Penerapan adalah cara Anda memindahkan kode dari tahap pengembangan ke tahap produksi. Dalam kasus kami, cara Anda memindahkannya dari lingkungan XAMPP lokal ke server Anda.</p>
<p>Anda menulis kode di PC, lalu mengunggahnya ke server Reclaim Anda. Masalahnya, DB tersebut mungkin memiliki nama yang berbeda, karena DB Reclaim Anda memiliki nama pengguna Linux di bagian depan.</p>
<p>Nanti kita lihat cara menyimpan data koneksi secara terpisah, untuk mengatasi masalah ini.</p>
<h3 data-original-level="H3" id="header-e79f73ca-63ad-9183-d959-d8fa65e0663b">Contoh</h3>
<p>Mari kita coba beberapa contoh. Misalkan Anda ingin mendapatkan informasi tentang wombat 3. Anda dapat <a href="https://webappexamples.skilling.us/database/php/wombat-3.php" target="_blank" rel="noopener noreferrer">mencobanya</a><br></p>
<p>Berikut datanya:</p>
<p></p>
<media-image source="files/wombat-3.png" card citation="This is my citation." accent-color="grey" size="wide" offset="none"></media-image>
<p></p>
<code-sample type="php" copy-clipboard-button><template preserve-content="preserve-content"><!--?php
// To connect to a DB, need DB name, user name, and password.
$dbName = 'wombats';
$dbUserName = 'something';
$dbPassword = 'something';
// Create DSN.
$dsn = "mysql:host=localhost;dbname=$dbName";
// Connect.
$dbConnection = new PDO($dsn, $dbUserName, $dbPassword);
// Prepare SQL.
$stmt = $dbConnection--->prepare('SELECT * FROM wombats WHERE wombat_id = :id');
// Run it.
$stmt-&gt;execute(['id' =&gt; 3]);
// Get the record.
$row = $stmt-&gt;fetch();
?&gt;

    
        <meta charset="UTF-8">
        <title>Wombat 3</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    
        <h1>Wombat 3</h1>
        <p>Name: <!--?php print $row['name']; ?--></p>
    
</template></code-sample>
<p>Pertama, program terhubung ke DB.</p>
<p>Sekarang, kita ingin menjalankan kueri ini:</p>
<ul><li>PILIH * DARI wombat DI MANA wombat_id = 3;</li></ul>
<p>Yaitu, dapatkan semua kolom dari wombat untuk rekaman dengan id 3.</p>
<p>Seringkali, hal-hal seperti angka 3 akan datang dari pengguna, mungkin melalui URL. Misalnya:</p>
<ul><li>$id = $_GET['id'];</li></ul>
<p>Kita bisa memasukkan <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$id</code>langsung ke dalam string, untuk membuat kueri:</p>
<ul><li>$sql = "PILIH * DARI wombat DI MANA wombat_id = $id;";</li></ul>
<p>Cukup mudah, tetapi hal itu mungkin membuka peluang bagi peretas. Misalkan seorang peretas mengetik:</p>
<ul><li>...?id=3;HAPUS * DARI wombat;</li></ul>
<p>SQL yang akan kami jalankan:</p>
<ul><li>PILIH * DARI wombat DI MANA wombat_id = 3;HAPUS * DARI wombat;</li></ul>
<p>Data Wombat hilang! Tidak begitu bagus.</p>
<p>Itu adalah serangan injeksi SQL. Itu adalah subjek <a href="https://xkcd.com/327/" target="_blank" rel="noopener noreferrer">kartun XKCD</a></p>
<p></p>
<p></p>
<p></p>
<media-image source="files/exploits_of_a_mom.png" card citation="This is my citation." accent-color="grey" size="wide" offset="none"></media-image>
<p>Kami ingin <em>membersihkan</em> data dari pengguna sebelum kami menggunakannya. PDO tahu cara melakukannya.</p>
<ul><li>// Siapkan SQL.</li><li>$stmt = $dbConnection-&gt;prepare('PILIH * DARI wombat DI MANA wombat_id = :id');</li><li>// Jalankan.</li><li>$stmt-&gt;execute(['id' =&gt; 3]);</li></ul>
<p>Kami menyiapkan pernyataan SQL dengan placeholder, seperti <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">:id</code>. Saat kami menjalankan pernyataan yang telah disiapkan, kami mengirimkan parameter untuk placeholder. PDO akan memastikan mereka tidak melakukan Hal-hal Jahat.</p>
<h3 data-original-level="H3" id="header-303aed86-390e-7cf3-beb8-f7820764b021">Mengambil data dari DBMS</h3>
<p>Jadi, kami meneruskan SQL ke DBMS. Bagaimana kami mendapatkan hasilnya?</p>
<ol><li>// Siapkan SQL.</li><li>$stmt = $dbConnection-&gt;prepare('PILIH * DARI wombat DI MANA wombat_id = :id');</li><li>// Jalankan.</li><li>$stmt-&gt;execute(['id' =&gt; 3]);</li><li>// Dapatkan rekamannya.</li><li>$row = $stmt-&gt;fetch();</li><li>?&gt;&lt;!DOCTYPE html&gt;</li><li>...</li><li>&lt;p&gt;Nama: &lt;?php print $row['nama']; ?&gt;&lt;/p&gt;</li></ol>
<p>Baris 2 membuat pernyataan yang telah disiapkan, memasukkannya ke dalam <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$stmt</code>. Baris 4 mengeksekusi pernyataan, mengirimkan nilai untuk id.</p>
<p>Baris 6 adalah:</p>
<ul><li>$row = $stmt-&gt;fetch();</li></ul>
<p>Hanya ada satu rekaman untuk kueri tersebut, karena hanya ada satu wombat dengan id 3. Gunakan <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">fetch()</code>jika hanya ada satu rekaman.</p>
<p><code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">fetch()</code>mengembalikan array, yang saya masukkan ke dalam variabel <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$row</code>. Array adalah sekelompok nilai dengan kunci yang berbeda. Kuncinya adalah nama bidang.</p>
<p>Berikut datanya lagi:</p>
<p></p>
<media-image source="https://dummyimage.com/300x200/000/fff" card citation="This is my citation." accent-color="grey" size="wide" offset="none"></media-image>
<p>Berikut ini isinya <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">$row</code>:</p>
<ul><li>$row['wombat_id'] adalah 3</li><li>$row['name'] adalah 'Sarah'</li><li>$row['weight'] adalah null</li><li>$row['comments'] adalah null</li></ul>
<p>Jadi ini akan menunjukkan nama wombat:</p>
<ul><li>&lt;p&gt;Nama: &lt;?php print $row['nama']; ?&gt;&lt;/p&gt;</li></ul>
<h3 data-original-level="H3" id="header-ee45dfbc-dffb-4e27-86bd-644338dcc387">Mengambil hitungan</h3>
<p>Coba <a href="https://webappexamples.skilling.us/database/php/wombat-count.php" target="_blank" rel="noopener noreferrer">yang ini</a></p>
<p></p>
<p></p>
<ol><li>// Siapkan SQL.</li><li>$stmt = $dbConnection-&gt;prepare('PILIH JUMLAH(*) SEBAGAI num_wombat DARI wombat');</li><li>// Jalankan.</li><li>$stmt-&gt;eksekusi();</li><li>// Dapatkan rekamannya.</li><li>$row = $stmt-&gt;fetch();</li><li>?&gt;&lt;!DOCTYPE html&gt;</li><li>...</li><li>&lt;p&gt;Jumlah: &lt;?php cetak $row['num_wombats']; ?&gt;&lt;/p&gt;</li></ol>
<p>Yang ini tidak memiliki parameter yang akan dikirim untuk dimasukkan ke dalam kueri. Saya menamai bidang hitungan <code style="box-sizing: border-box; font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 14px; color: rgb(164, 19, 87); word-break: break-word; font-weight: bold;">num_wombats</code>(baris 2), jadi saya tahu apa yang akan dikeluarkan (baris 9).</p>
<h3 data-original-level="H3" id="header-dd0b7ed8-bd03-c143-77c7-3969f37ffe17">Apa itu PDO?</h3>
<p>Kami memiliki pernyataan seperti ini:</p>
<ul><li>$dbConnection = new PDO ($dsn, $dbUserName, $dbPassword);</li></ul>
<p>PHP memiliki lebih dari satu pustaka kode untuk menghubungkan ke DB. Dua pustaka utama untuk MySQL adalah mysqli dan PDO. Kami menggunakan pustaka PDO. Lebih mudah digunakan, dan mendukung lebih dari sekadar MySQL.</p>
<p>Berikut <a href="https://phpdelusions.net/pdo" target="_blank" rel="noopener noreferrer">tutorial bagus</a></p>
<p></p>
<p></p>
<p></p>
<p>Mari dapatkan beberapa interaksi pengguna, melalui parameter URL.</p>
<p></p>
<p></p>
